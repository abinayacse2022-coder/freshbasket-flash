from flask import Flask, render_template, session, redirect, url_for, request, jsonify
from werkzeug.security import generate_password_hash, check_password_hash
import json
import os
import boto3
import uuid
from datetime import datetime

# --- CONFIGURATION ---
app = Flask(__name__)
app.secret_key = "freshbasket_secure_key_2026"

# AWS SNS Setup (Optional for local, but integrated)
SNS_TOPIC_ARN = 'arn:aws:sns:us-east-1:123456789012:MyFruitStoreOrders'
sns_client = boto3.client('sns', region_name='us-east-1')

DATA_FILE = "users.json"
PRODUCTS_FILE = "products.json"
ORDERS_FILE = "orders.json"

# ADMIN CREDENTIALS
ADMIN_USERNAME = "admin"
ADMIN_PASSWORD_HASH = generate_password_hash("admin123") 

# --- DEFAULT PRODUCTS ---
DEFAULT_PRODUCTS = [
    {"id": 1, "name": "Banana", "price": 40, "image": "https://upload.wikimedia.org/wikipedia/commons/8/8a/Banana-Single.jpg"},
    {"id": 2, "name": "Papaya", "price": 80, "image": "/static/images/papaya.jpg"},
    {"id": 3, "name": "Guava", "price": 60, "image": "/static/images/guava.jpg"},
    {"id": 4, "name": "Strawberry", "price": 150, "image": "https://upload.wikimedia.org/wikipedia/commons/2/29/PerfectStrawberry.jpg"},
    {"id": 5, "name": "Grapes", "price": 120, "image": "/static/images/grapes.jpg"},
    {"id": 6, "name": "Pineapple", "price": 90, "image": "https://upload.wikimedia.org/wikipedia/commons/c/cb/Pineapple_and_cross_section.jpg"},
    {"id": 7, "name": "Orange", "price": 70, "image": "https://upload.wikimedia.org/wikipedia/commons/c/c4/Orange-Fruit-Pieces.jpg"},
    {"id": 8, "name": "Blueberry", "price": 200, "image": "data:image/jpeg;base64,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"},
    {"id": 9, "name": "Dragonfruit", "price": 220, "image": "/static/images/dragonfruit.jpg"},
    {"id": 10, "name": "Watermelon", "price": 60, "image": "/static/images/watermelon.jpg"},
    {"id": 11, "name": "Pomegranate", "price": 140, "image": "/static/images/pomegranate.jpg"},
    {"id": 12, "name": "Tomato", "price": 50, "image": "https://upload.wikimedia.org/wikipedia/commons/8/88/Bright_red_tomato_and_cross_section02.jpg"},
    {"id": 13, "name": "Onion", "price": 30, "image": "/static/images/onion.jpg"},
    {"id": 14, "name": "Beans", "price": 90, "image": "/static/images/beans.jpg"},
    {"id": 15, "name": "Peas", "price": 80, "image": "/static/images/peas.jpg"},
    {"id": 16, "name": "Brinjal", "price": 60, "image": "/static/images/brinjal.jpg"},
    {"id": 17, "name": "Cabbage", "price": 50, "image": "/static/images/cabbage.jpg"},
    {"id": 18, "name": "Cauliflower", "price": 70, "image": "/static/images/cauliflower.jpg"},
    {"id": 19, "name": "Capsicum", "price": 90, "image": "data:image/jpeg;base64,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"},
    {"id": 20, "name": "Carrot", "price": 40, "image": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIALcAwwMBIgACEQEDEQH/xAAcAAACAgMBAQAAAAAAAAAAAAAFBgQHAAIDAQj/xABCEAACAQIEAwUFBgMHBAIDAAABAgMEEQAFEiEGMUETIlFhcRQygZGhB0JSscHwI9HhFTNDYoLC8SRyorIWUyVzkv/EABoBAAMBAQEBAAAAAAAAAAAAAAIDBAEFAAb/xAAqEQACAgEEAQMEAgMBAAAAAAABAgADEQQSITFBEyJRBSMyYRRxUoGRM//aAAwDAQACEQMRAD8AqkvHBAi0zkl9zfrbw8Md8saSpjqKZGPbMvaxk9WW9x8ifliAqd4E8m2W+2JNJM0dXGYjpdHBj7MciOuJmEnIhNJdEpn7TdVNx4+I+n5Y8RJJ6W3s7C42IYFQefI4I1UKzTxV1JGBFKuh4gOUl91I8AB8rDEKWjMlQZKSrZnCE9lq3vyAv4HE8VjE5HKqpEEkxWKFD32A7Rr+mI1RTRRvqp452c79pM2/yAxtPFmBRO0ik1gWtcWI+fPEWHtZb6idQ2tc3Pl9cMG7vM3mEaGA1s6U8Z3A1O1gL4fMkylEDySUrz00AGrSdTXtsF8APLADgvh6XMBK1aXoaRgS00lwdO4Onx+PX0wx5tW5XS0NTDTI8VMqMsM4F3LADT3hv16+BOEMy7sHmKfJ6MzNOIWpqOno8uV58wdWQSFT3Al1B71t9rgHkNzvhBzacUtSaeRnmniOqVpDcvIdyT6bD1vg5SZxNllHJPUR63eNzrcWZXNvodvhgFBTQkCtrpGaofv6QdIRTc35bnrtg0AAz4hJwOZ1pp6uqiqJq2ufa1o2J7PfmAOVyMFaKVWkC6bdkpEbFbaDcd43+A+GBVXXTJFElPHalVrN2hVmlPrbyx0TMK6qMxjjjjPZ20kAC1vhvjHBaeIzzGBoZqiJO0lRrgsZG2PMcyPO2BmZCpy9kkDo6Hd5AvdHgD43wJqKurEqSESKAALox323GJEksstJHqCyhhcxn3j4b88L2bTzAxieyZnWCm1KZO1be6Cwt6Y9oJ2qEZkiczJzBf6/vyxur0dKBJXyDWPdihJBAHQ22xHnzCIt/wBJT03e5tJ3m+O+NC56E0Sdl8FXPVSxQyxrVMto4ZvclPhc8jbljkKcJHJUC1PJTt/GglB1o3h/zjSizN5Cf+sjSRP8MLov6EDBps0SXtTJWVEYNgJdZYM3gQw3HnjxyOMTcGR4qgV9KZIwqVVrug+8tidQ25+I62xypKImV/a9SrbVe9rH9nHk8sgnLSuZAp+4FNh5W9cdDMWktJIopnCiQkXPgLeG974DuDOrUMYpQY20obndri+/zONJT90y+/7p8zt+uN8wZUngEYtCWsQD3dXTcdRyxGkqR2+iSCz2/htfmf3+WBxMxO2WZtDl003t0bOhU6dLcyCBiXBxajQkezlrn3mP0wCrKJZY5ttMpIYk9DgDL28EkiSKQo3JU/LDkQOOIxV3SxY+I8uKAywEP1AOMxWwnnffSx88eYZ6bfM3YZxaQySIZVso6eOCuVUr1puiheyvy68rX/fTywPlMQe2vZhZTblhnjhnpstp6eIWqJirMx6eHwthtjYAjmMgxSTUodJXZo3BWVQ1tNuTf9wviJUPNS6lpzeJ1HZyEgXsQdvPyxNNXNTN7WERo1usilAS5tv+d/ljxUra7NI6bLFhrVlUHs0juPj4EDrt8MCvyZ4YgqCaoZzd7gnvXPL+mHnhPgnUYsx4kLJB70NIrfxJ7dT+FPqfrghkPCNHTSLNHSx1FbGe+wdmp4D5X99h/wDyNvXHfPM7paSqejkBzCqexeFXOkWPORuv/YBbzN8Ie7ccVxLtzxJtdI+bku7djllONGmJdnI5Iv6n+eAdNGcxzRJHjUQPIscUY6RINTEeXIf84OzVSVEgpSGaKACPs1WwEjKSBblewPlZh1Jx7kLR1E9Sw06qeEJrXkS7nf46T8LYjywPMVnmJHHBdquSNGvKHLabe8Bv/vO3liEI4Hy2KOsLU9SWZwSdKc7W5bW/niZxLmUIzONUGl9dywW+kGxvz8wDgXnk5/6SmlaMskVieoYk8/iT88dCsHYOI8A4nelqI4KnVXVLOwG3Z3PTkt9uWPKrM46n2SGiN3dSJCe8V36egvzwOZo4wkSBJCqkXHj1GJOUR9rWwaY4wEkMaq2xvyH5jGlQOYQXMOxVcfbRUEVWJIFsmqGPQdjtqJG+9jz3OJGbZYa0tBDVATRgxjVYRsAoI87m/PEuFWFNUx6Yy9NJYva7MAt/mFIPmAceVMT0k1LMrOyIPZ51XbtLAEc/I/8Aj44m9Qs3EQwAPEVJcgro4ezkEIkDamBqEHoDv5Y4f2RV0scprFFOim0mpgTfxFvUYto5bknEeWU7oqyCFige3fikHvIw638Oo3GAHE/D1fUurU1P7RGkKqw1C5e1r97YiwHLBreejC3mKWXQBqKWoaCOko0PQapJm6DUeQv4eeN6anbMI5tOuRyxeQsbk+FvK17YYq6rnkVKWanWOodSr3jCXATa1xzvtywH7cduaOJ5C1gAeyA57jzxpcnmaWzJqQTUNOY6hgIW0gqh70Ztbbxv4Yh7K9mARGRlHUAg/nvcjHk8PYxyT1kuuTXqCFyLMb9bGx/pyxpRSR08jGsjaOnlW5jsWuxvY8/ewG3zBGMzaaomjiaMxou4sbXJPQ28N8bVVnQ9pGsfJ0ZeZVrEj6WxtFSR1RdkqXeEqVieGJnva+xHPbfn0xv2dPTT09NWoVUt2LyAgr3txY+Gxx7HPE8RIbtM8PawhZZQR3b3vtbA6PXN/FfZiTrB5HwwcjpmpVrQwZuwIRlZd9Y3vbwte2Ob04mUPCjBm2IK/phtS5GBNSRKeXKI4VSalZnA3IOMxylop2kY6WxmC9A/MPZNhkkUIMFSs40tqF4x37Dbztv0GJ1XWJ7HNLSMDVghWacDuA/hG1vUjpg9kHDdbM0VVXzGliAOmHSCxB/Fe9vjfBccC5HJI9RUxVLhx3UeoKgD4WPwvhA1KBvfzLV+nX2DdnErLIcmzbiTMGpaJQIo956mTZIV66m8/DmcWrQ5LlnDeWvDr0BxeVmcJNUH/Mf8NPIfHfHpzyg4ayb2SkpoaeGO+lh94+JPVvPCJV5/LnVWWDbFtI7u5Pj/AM3+GMe43D2DiKvoeptrjBhbP+I6+SGOky5UgBA0BF0qo5d1ef8AqP0xCjo1yeOCNFE+aVLKYo7bl22Dv4DwB9Tg/wAL8IOCayolAnfftHUsQfG3j8fngueGsryiubM2mqKioX3XlYNpPVgAOdv0wsOqjAmLpLWG4CDfYHo8vp8qprS1bEtUVF/fd/esfO1r+A8sG8j4XbL6CsWWsEk9W6uzCKwQKpAA33tfAPhjiKLNOJKiCFLRQxXHmSR+g+uH3v8AZ7G46nAqGGd3Zlmn0KbNzSjOJcnrMrzGZsws12OixuGRjzU+O5Bwu5hLE47TXqkJIIZdgByPn1xZH2twLJlq1FtLxSgA+IOxH5H4Yqlj93u2vtjpUHcuYi+gVWYnZZWdrsTa12tvt64d8ry3tcy7fuquX0KSuG+7K15APM2tfC/l9AM1qqOiSBxUyOsbvHupXlcj0ub4uHLsio6GGd64du9QdU3Zmy36ct7jlf6YVqLlQTKdO93Cxf8As/oZc7y81zI9PIoEUkpHdlK+44B5kDY9DiRxbClJVy0M8R7CaNqiN1J73Z2LL5HTr258sPGVxxU9II4IkiiW+lE5Lfnhd4rkjaFHlAKxTxuT4DUFb5qzD0OJNys+fmUP9NCoT5ETcrEGR1s9RRVDOsaHVTBA4kAN7bHlY87XHP1eKOsbO8uaXKKjRXRDVoZhZxzKMORvy62NiOZwlcT0S0ORw1idyoD08ZYmw1BJFY+vdXBPhisApoKqKYrVxEk3W+299RHNf6+GMsORvnMVd/ULwZxluYg0ma0ixtyaKSMD/wAG2+KnHNuCsomleXLD2NTItrxFiQP/ANTm9vNSB4YK5xkWWZ5GaxFi7dtzG6FgrEc9mG17H54S4a3NcjzinyaTK4DDM50MJ5TGVAuWActaw6C2DrBIwDDFDhckcSJn3CPENPGdCirpYT2heFSXFhtqQjUPkRvzwLy+kmrKgQ1DWl0GSIX+9sTt0PL64f4eL3VYu0pGqFZS6AT+4twoOphdb9N8d5s6ynMZEL0UkddFKQ0joL7CzDUuzbEfMY81uEzjqbTR6zBEiAlPXwZhNLGSUjF0jYNpkRjuQRYEi/I+GJebx0r5f2XZw6S578L90MTtpXc2vf4nFi02apKAiCyAWtqxrV0WV5hqE1Oms/ftYn4jfADUK2DOlZ9ItA/cruGU1kEEyAEzq0E6suxkUELf12PzxD7aSEANKAERSSPyw6S8MSUUNQ+XSdskmmVYpDvrU7WbzHp8cIeawVlFmMokpgpaRmUMbWW+3rhgbPU5VmmtqOGE7nNZAbKEIHK6g4zEJ6pNX8SKIN1uBjMFtb5i+ZbtP/El3/u0P1xzzSuVQV8sb1TrR02gHvW388KOb5iI1IF7k20jc3xy1z+M+8qq38+JpNNHJPIJVVkXvaXGoE9P35YJZBw9ClY+ZvTRw3Wygpb4468M8NTtarzVBGxN1gO9vNsNEjrLUJDH7q7m30wwKycZitQa7GxjMkbw0xvztc4UOIc00QSluRB+mGXOKgwU9tS6je/pitM1gq87rPYcvsZH5neyr8B1weNzBQZ6lQENhgTgup9l4vp5C2gTgx+u1x9QMXko/h7tt0xRlXw/mnCucZfV1ypJAtQjdtGxKjvC97gEdcXbl0iyx2PPrirVABlIM52nLMp3DHMr77VTpoYkO6PONR8AAcVb7LLPUQwUqtLNKwVFUXJPQeWLs+0fKWnyxKiNbpDKDKfBCCCfUEg+l/DAngLhpMogkzKsVXrH2Q9Il/mep/rg69QtNXMlsofUarjrEm8LcOrw/QO9TpetlX+MyfdH4V62uNz1+mJM2YSqYaOQmSSUr3lsW367c/DHucZgkEJEjdDe/PAvgyEVWae0lbqgLR6b7XNrk367/Lptjnf+zF2l9tPohFQcSw0OiEW8MV/9oc8oyiqSAXeUKigDndhfD9U9ynOFQtBLnEMcvQlh6/snDtwVh+owJ6itAP2mh4+GMvWJHJkqQxtyXZzb/wAvphe4QrzRdpE2nTKQV64b+OVhnymoR+ca616WIHT1FxipKOfsp+0DWlBG3jbFdYF1JUTkCn+FcpPIn0VlEy9gkQ6Cy+mNM1y5KyExTJcNtdNiPHfx5/PCvwpm/tUEMpO7LY+R64d4pEnhJBuDuDiOt+0PYnYvpGM+DKv4jrf7IR6aEXzKe8jSqh0RIo0qF9BsPUnHKlpQva0MJMSuxkhYnUBJ1B8mFvlhu4ryODMUGpSsoBEcg5qSCP38MKVPR1dPUVNS8tp17MIpJ0yMI0DHnyJvhu5SMeZ89qNK+jYW19SLSZyysBJdWIKsDzHQ/XBykzhiqd+9zywKkyunztZqmjNhL/GFz7t+6xv0sbE+hOANdHW5RIpYns2GpNW1hfSRfxBBB+GA/jq59vBnb0/1pWAFw5+ZZlDnGm7s1idhidUexZlS9lXQxyo33XsbHxHhiq6fOzpGoOu/NtsHaHOtls3XCillfYnRA02oHsIMPtwRk7MWTtFU7gar2+eMxyXP2CgWxmN/kPJz9Jr/AMZ0rZp66oMVPE00h+6ovYeJ8Pjglk2Qw5eyVlcyS1fMMwuI/JfPz5nBREpcphCAi9r6jzPnhdzjPwI2s23TCwdv9yjc1vtTqFc1zmOlRjG9yRb+mJeQRf8ARJUyizyjXb15fS2Kxhq3zfOqahU6lnlAb0G7fQHFr1LeyUbHyw3aVG5ouxVXCDuKnGOZLSrNLIblbAL4+H8sTeAaVIMoSre3tNV/EkY8yDyHwGK/42qKnMKsxwu2mJg7DxPT5YduB68VWWUig7rHoZfAjbBbAlYYdmE+4goRjEasyoqLM6N6arhDxyKQwPX+uBOTE0LPQ1LlpIbKH/8AsW2zetufphgjF9xhQ47eehpWzGk/vqc95fxoTYj8jjWUsBiS1EDKmFczzWP2aSPT3ipB9MDZ61YKQhNIsL28cL9Tmk1XnM9MFtDFKY7+Onb9MRuIa4oVjQ3Zha3icTNW5OD3L66VWCeIc27RpGeSyk726emGr7Mg8kVVUyRyQxkxxwRvtZFF7/EuThZybhmbMc3haua8a/xHjHIDFm5UvfdLWswFhv8AvniovWiemvmT3r6j7+gIRzNv+mN/DChTLrzeWT/6wB+v5YbMyZRAwboMK8dlSR/Em2Ev3mZSMJj5gHjKdpqZ6dATJJ3AFBN7+mE+j4deiglrc3Ro44wNCstxfxPl5Hrbph4pIvaM+PVYxYj/ADfsDBvPqaI0LI63BQgjy/e2DTVGkbBA1mhGoP5Ss+G87ipsxeFQyUzm8evoeX12/ZxbWR1vaIoLbYoerpjFVTxIv8FHADM1go6b+hGH/gLPjVqaaST+PEBf/MPEfv8APD9Zp+rkiNBfkHTWeOpa08SVEVsJXEFE/tJiWL7rBZQeRI5W68r4cqGTtYbHwwLzZDBKJfAi/pic9BhCZA2a36le8OVYyLiBqeaFkpCQ0gbcKG2I9PH4HpfBv7SMuik4XWpg1OUqLqVFzpNgx+NgfU4lcXZGmYUorKGEPMi2cKN5EPMHxt/PyxtwqCMqpoZpDI6ppJkO48sE9wTbZ5nKT6az2lAcASuMkyyOWoaOq1BdH8MFrEt07vPffDTlnDtNmJeB6eWkaJtLyK9txzC+I364YMz4cop5hWQR9hU29+IWJ9bdfA88aZXUaJijOryKbM4Fix6n52wN2s3jK8SrSfTXTUc9CaHginv3KqcL0GpTb6YzDSlQpRfTGYULD8zpbrRFHiLOlkVhq5EnFdZ3ngJKodTE9OWDVNTVOdV5gd9EQGokczthe4kyf+z8wVbExsl0+t8X6WlA/v7h6qxkr20xx+x7LHq62szqosRTgRReAZt2+QsP9WHTirM+whZfugXN8SOEMuiyLhSjpkN27MPIfxM25Pz2wn51I2YZxBSA6kD3k+G4H78sL1LB34itAhHufmE+Hcj7eheeoW7zXLHwGFyrr/8A4tnaPFf2ZnAnUHfc++PMfXl4Ws6JVp8vRbW7u+Kl+0CQM1hy7QW+eAowbAp8x7OWVmlw0MoeKNlIYMLgjkcAeLdMtBURvyZdPrfED7OczNZkFJTrpaWJTHbn7p2HyxGzjMmkrGhbvMjb+RBGBsJUkRNSEvmCoYmikeaXYuS5PrvgfA7VVeZie7E3dP64k59XFIzHG3fksB+/hjegpdMMcMfNrKvrgRkLk+ZcxzxGnhqmb2aWoK96Rv8AxGCmRSGSSdzz1kfljuqLQZYNXJUt9MacOgmkWUc3Jb4E7fTAY94kjNlSZmfSdwR4Vauo7OmlP4VbDFn0updTLZhsDhH4qqvZskqiG3ZNJ+O364IDfYB+4VZ215hb7PYzVxmrm/xSW+u2D3FY0Ub+mIf2axKvDtE45tEpOJfGUqR5ZO+rS4S/yxjpkn+5nq5cN+pS1fFUGvl7FmBfp+LBTJ8t/s1o60s5nBJI1bW6i3n/ACxnDNLJXVxmmPahRpTywdzUCKFlVdrbYtvvKn0hEaDRqzG2wck8SxsgqBLErAgggG464655EZICBuxBsMLnANV22WwD8KlD6g2/LDPnC9rT28sSr7VK/EZcMW5gLh3M/akeFwt0On5c8cswpzl9SKuns1LIxEngjfyP754SqPNjlnEdXA+2mobY9QTf9cWTFUwVtFoJDIy6dA/I4GyrHtMaRtYOvU8jftoh6YAZxTvSVS1i/wB0SFlH5H99D5YkZLUMlTLRyEl6d7XPUdPpgxmlI1VT6VXfT/TEqqckGODbHHwYPjqboDrxmFeXNoqGRqWoX+JEdJ9On0tjMB6FnxKfSrMk/ZlRTFZpK1CjLGqMp57Dn8sQPtDigNYIUN2UkA+F9rYI5jnqUE8n9ntoYrpcFb3wm1dYaysQPzZ+9jrAs77sTnpTjkyy5c1FTw5RtAv8WclCPwlef5j54gcPUJnziSoY3EQsT5nELJyfYoIDytJL8S2n/ZhsyukFJRtdu+5ucTYzYTGN9uoj5m+cTgRsA3eA2xXdRlT8QZ/FQl9Ci8s7291Btt57gD18sNedz9krgvdQLgYWchrpUlzKuWCRzMBDCEXcgE6iPEXABwdOclh4i+BXtPmNOWx0OSZxQU9GixU6ShedzdgRv47kfLCjmVW0NRMJBpqA7LJv96++/rgfmuaVGpzMJEkI2EgsTfle++PM2SXP8wjzLLkqpZ6oBp6YQtaKUAAsGtpKsbkb3G9/HDq6C4y0J3Wlh5yJMyaibM61p5izJGQq7Ww25LRL/arFQVigF+944GcNUdTSUjmri7FrcndVPxF8aVvEMOWQzRGaFZHY+64c2t1Iwl9xbaBmYzZ8wrxZnojjaOE933fXDRl0Ijo40X/DQL8hilpK5q+vgDljC0i3Piur+WLppp1FLc+GNasoBk8z1o9oCwFns57Ts2brfFd8ayPMIaWLmxv8B/yPlh1z6dHlQrzF8LFPSHMMynmZdYjXQD4Ac/z+mBoYK+74mum5NvzHD7M3ePh+CCT34tSn57fnjv8AaIwXI6hyu5QAW9QP1xG4JAiWqjHJXv8AMf0xN43VZclmHmv/ALDHt+58xRTY4EVOEKLsqe459ca8QdxHv4YMZLFopG9MAuJpeyRjhAJe4H5nQrAGf1Jn2fzPT0kjP7kkzMnyAP5YsZiJKa48xiuuFh2WQUsqdELH5k4e8vqlmg0+WHb82tI71yAwlQcdZdLBxJMyjuyojgj0t+mOmT53mVCul4zIijmTa4+WG3jakVqylmPu2ZG/T6A4iNlcckAKdRikWqygNFnKrkTnQVitn610MuqmrgXQWsY3WyvGfTbfqGGLFpZVqYFtuSNxipGjky9amNtWhF9rQjmrIQr/AAKMfiieGH3hnMhNArLyYAi2E3gBg69GeUl02nsSTU5RTSzu8sETOTuTzxmDZKN3mCknffGYHZB9VpQOaVqgl2ILHoeZwPjMrukzEhUYFU+uPKeilmlDztd23v4eWCehFTTjpe2obRCy9p3NwJY/DEAlgogOQDDb/uv+/XDPV6kpy404UPs6fXRsdVtDafS37GGrPJFSkOtL7c/DHNI2kmFby4AlecZZq0UbW2YkgC/PC1lzGpow07MdTkEsL28h4bY34wYy1ZK+5ew9bY48PLroJSfuy2+YxWiBaMiaCfXCmFpZKyCJUgqqhE0A2WRhY29cAamsrJ52Spqp5U/DJKzA/XDUsPaQR+lsDJoKfKKyOaZFnq2TVDAVvGgvs7/iPMheW2/hj1FmSRNuXGDJcNR/YWRCnka1XVEP2YN+zjIuC3hf6YWaaN84zpIdJCE3fyUbnE2qR5RJPUuXkmYlnbmT1P78cNn2acPk01RmVRH/AH7aI9X4Rzt8f/XB7lrRn8xFquSqnqR/7KFNH2lrEWtg9l+Y1mY07R0bMCI2Ybe+QPdB8fDGcWFIIWAGlgNsBOHczibJqsSsFencAty94kqQfEEH5Y56hrFLHxL3YbBMqK0SwvKwuw2A8Ty/W2DOU04gyg73kdSWPngZlFRNnlcUkiNZAmxkdQSDz2e177f0wzVaxw0hi7YCw3BxpGwYiXYkgSDwrUrDmstO7d511fL+pGDfE3eyxkvq1MBitmzmKh4ngePW3Zm0j3CgKdvC/niwsxearpqVksIJTquPL+uBsrKKM+YJcNbmcKMaaK/livuNKi5ES+8eeLEKstF47nFZcQq9Rmc3+TbB6VfugxuTsb9x04D/AInD1KOoDL6nUcE8trPZKkxScwbD0wM+zxSuULGzcnb6nE/iCkKTGRRu24bC7z9wsPmbWARsab8aSpJS0x7pvKCD4bHGlF3qNBzwrvWT5hM9JJMxekYMB0ZCo39VP0N+hw05bEXo003AvtfBspU8xPG3+jFHj2lZssMifca7fv44j/Z/nDRg0Mrf3e6eY8P344YuKqZ5csqI/wDIw+h/XFZUcslDURVCC7IwNvLw+OK6FFtBQxFhKXBxPoKCrBhUlt7YzCbT5oJYI5FfusoI9MZiHcw4lPoZ5igtP2QN+fTESrkVRvz64m1k6qzYFiJ6xifcjHM+OLagT7mjbDjgR2+y+pUx1y6tzKPla388M3EdfGkAQPZgLAHmcIPDUnsM2imZElqX0KWuLaVJ6eowyrllTI6T5lOHYboicgfO/PCbzhs+IitMtkxM4jhIgdzzVhz/AH54GcOuyPMg91rH4j/k4ZeK41NJKfAj88LWUqFlhPR3IPxuP5YpoOaDBuH3wY8UKHsxq5YAZzD/APk6cjwb/b/PDPlsd6ZdTd622AGcx3zamQ/gY/VcS08PHWHMk0mSf2hJBCr2LsAT4Dr+/HFmxQw5ZQRwxqsQRNKr5AWwB4bijp4vaX6C3pjnxJnQ7JlV1sRYL4YV6hYYgOC748Ra4zzHX2i9Rs2FDI5pvb5o9CzQzrpnhfdXHTkRYg8iNx6XBn1jvWz6ybgm9/HHvD7w0nEECy+7KpTnbfz2/e2L6R6dZHmBqFDAZ6Esbg2CkhyxI6ZXjQMbpI2s/MAX+WIXFldTwBwjjZdz/PzwL4grqzJUigoUWGCU7vvqb/UT4X5YXo5HzGVHnJaCMglD/iOeSHy2J5cvUHEyVGw7m6hgBCW/5IfsTS1YXRJLWzkOyKL6dQBVQOZNjv8ALFoZLA1HklDlrOsk1MHMpU3CMzXK38uXrhSqGXJqWf2SVnrpyxqK7TYi/NY/Dzbr0wa4FlM2WwxWsVDLYeIbDNU+6v2xVdXkw9UjRS/PFfV8F5aiX8TH6Yec6qEihNveHLvXwsZiipSgnmFubemJUY54lFfA5hH7PhemMfmp+mGbOqftKe+nlfCvwJIBCAvMxo354bq0M1Ix8Rj1g97ZgE4YESpdbU/GD6DpN0PyW2LNyyEdhqjPcIvp8PLFYZ3/AAeMCx6hT8h/TFocPVCmjQhdiN18fPDr+1P6gj8GI+ZAzpSsRsurwHLbFYZlSLDRsy3UayI4wb6lFwSb9L2A/wBXhvbGdSQ6GuCTbZQbX9T+/wBcVrmStUNKZSCpYqABYKATYYLSuFOZjLuXmAKbiGuo4Fp4+zKJyuvxx5iEYWBICM1jzxmOt6dZ5xONuvHEaaOlbNqhwTaCHeVvoFHriRmBjpl0RiwGwGDyU8GQZHDSTIEqdIeZh7xlI3v6dPTCNnde8jFYxcknYdMc5VNlm0dCdo3iuv1H7M1fNhBVUo09+CpEwa/Id24/8fz8cXIpVoFB56t8UjkdKKnOKWOcsdUoJ25kb+PwxcsMojk7Gp7qncN4499QUAKokujta3e56ihxwyJR6B7zNt+f8vnhcgj7Dsb/AHCp+owV4zqBU53FRR8hUqp+JH9PriPWwssDC1hbY+ePV+ytR8ylW32E/GI5ZZT66dR+EYW871LnMK/5W/TDXlU8Zguq3DKCDgJPRDMOIkCcolu3x/4xKhwx/wBxpMKzzTU+WIYmVGcWIZbgj1xXHEuZVZcQ6yA6m9uuLIz1TDEEZeS2xVfEeqSuCIuyr+ZxToFBtkuvbZRle5rlWazQPFGVWRNQABNiPjgtHlslZVw6tnZtvLAKhEiVMLaCIkkVieRIB33w31lQaERNEVMqdTyxXqfaw2jkyXQNuQhzwIX4impjldAKqZ5ZYNRKoQobcWJO/IX6fLBjhDK458mXMqmNFVwTHGE7qL05+Nrk9dr3sMVrmNdU5lKqEKAx0Ek2A35/vzxcGa19LkuSx0yqgjhjCKmroosPyxHcrVVhT2ZSlwsfC+IicYVkcYkHgbbY58I1dRl1OpbU/ayatHhgLUzQ53mQUpPDZrqAwdWHobEet29MNmUezxuJP4JlhiLQRNIqa5QRbdrDa9/PTbBPWErFZ7MIXCwl1/EcQpxLP2mf+zQ7pCwD+bcyMCuI5Vgy6R1FmG3hvg9SwR9is89xNINRJa+/XfrhN4vrRIwp49+9dvTp+mJqUzYFx1KGIWr/AFDHA9RcwoOTRC/w2/XFhzujQW8sVFwTV9lNGT91tJ9DyxbKM0lJcciMeuXFrCKDBkDSmOM5Ox4uhPQIv1J/TFpcNvrp1PioxW32m0LLmtFUJ/iRFT/pN/8Adh14MrVqKOIj3ilj8MO1IBqrYRenY77FML52ihGHiMV9NHftQF5SN+eH3P20xsRyCknCNSn2hHYfiOJqeiZUOhFl4rSONP3j+eMxpXvorJV8GxmOqAxElLDMkVubvmBaaSrU3PeV2swPlfmP3bEB6imiF1ft3/yghR63AJ+nr4RPZyDYx2HU+GPDEnuo/LfZr/pila0X8ZxHtdhgxt4BjNdnaSBAAisbDYC1rny95R8fLDTxVUBC2+lV7owJ+y91p6LM6ltmVlAJ57jA3inNTNI9mYFrgbX+OObqF9S8KJ2dC4poLtIlPnUE2dU6V8YkVJ1CTDushDcm/Et/Hl9CY4qkGXACOQ6NOsI1mBv5HChldBJX19PSQysWmcLspHd+8fLa5xI4sr1zHO6iWLV7PG3ZRi/RdhYeJtfFjadWZceJAmrZA3HcY+GOJKenkShq+zhSQKY5NVkQkdQeXP0GJ/A1TLNnWZJUkdurjuo2oCwNrHryxX0yvLFDJpbUidm3wvp+n/rg3wp22Uyf2xO5iplBREb3qlvwoOtup5D6YG3TIVbb2ZlWqsDDPUc+LaoU0ZSeS+kfIYrGormmkdiq6WY/Lpidm2Zz5zUSzVExTfUEAv8ArgYafzZv3649pdOKl57ntVqTbgL1NoqpSbldzjs1fcaRqNtrE7YiGBvwNjUxt+HFXEkDMJM9rQhQykD71m3Ax2nzczxgPI77/ewMKYzQ2NIUzA7DqEqbNFp6gMFNraTpx0rs4E9hGr264FBWCk6W8MdI4gU0ydoh+61u78R+v0wJrQtuMaNRYibVjdQ8WTHKEpGj3hXQAASStttsLdVXyTTs0wsW3A8MRpKOphTXNBNptcNoNvnjmsTFSQrWOBSitCWAmvqLXUITDnD1aEqNJVtLDf8AfxxcOQZgJ6YI394MUdlNDU1NR/CIjSOxkkk91Adt/PwHM9MOldxNLkUtDHR0SSvNAtTL2h73eJ0Lccu4F+JOJNVpjY+UlWm1SpVteEftX009FTn74mOn0Km/6fLArgvMjTVUUbbRy2K+V8LvEed1nEVWZ6shLbLGvurjXLa4U0AicEMvJl6jwwTUN6O09wqtSvqk+JbPGsyU2R1FWv3E29Ty/TCDw9UdpAyK3dKXt44KZrmaZ7wBBNI5RqeqWCcg+RKk+R2+OE6mhqcshzBwx0vCscLX2fWRuP8ASrehwunS/bIPBzCfWlW45Eg5vN22ZVDpqI1Wv6bY9xG7OQ7jkeWMx0QuBic82knMMFMaGnQ7lcZjMDPSZl0zUEdQYzo7WIgdbtcW2+JxBnjWR+0lLFr8sZjMBtAbMIsSuJIpmMKMkARGdSrSabuVIsRfoLXG1uvO+NJnE7harVKByfbWg6d7mR5G/wAOePcZgoMlU65bTAtJLLUXX+6aPQL2uLkE7X6DxO4xyqJZq2QyzPqKqAoHdCr0AA5AeGMxmPCenEotztjxlXGYzGzDNNONTHjMZj09NRApONxGg+7jzGYyemwRPw49K4zGYLE9PYpDA5McjxNzLIxB+mJMOaTXvJHTTo5sxlp4yWA8SVufjjMZjCBPTKrMpp4exhBAHugBVAvsQqqAq7G17X8+eOnE3Z//ACGtRPdp9FOLja0aLH/txmMx7E9IDR9GUWxoQqYzGYKek7Kczjo46uGWmWpo6pFSeLUUJINwyt0YHrbHaulo2yn2fL/a+yjqVc+1BLglX5FefI9OuMxmAPc3EFWx7jMZg8zcT//Z"},
    {"id": 21, "name": "Beetroot", "price": 60, "image": "data:image/jpeg;base64,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"},
    {"id": 22, "name": "Potato", "price": 35, "image": "/static/images/potato.jpg"}
]

# --- HELPER FUNCTIONS ---

def load_json(filename, default_data):
    if not os.path.exists(filename):
        with open(filename, "w") as f: json.dump(default_data, f)
        return default_data
    with open(filename, "r") as f:
        try: return json.load(f)
        except: return default_data

def save_json(filename, data):
    with open(filename, "w") as f:
        json.dump(data, f, indent=4)

def get_all_products():
    return load_json(PRODUCTS_FILE, DEFAULT_PRODUCTS)

# --- PUBLIC ROUTES ---
@app.route("/")
def home():
    query = request.args.get('q')
    products = get_all_products()
    if query:
        products = [p for p in products if query.lower() in p['name'].lower()]
    return render_template("home.html", products=products, query=query)

@app.route("/cart")
def cart():
    cart_data = session.get('cart', {})
    items, total = [], 0
    all_products = {str(p['id']): p for p in get_all_products()}
    for pid, qty in cart_data.items():
        p = all_products.get(pid)
        if p:
            sub = p['price'] * float(qty)
            items.append({**p, 'qty': float(qty), 'subtotal': sub})
            total += sub
    return render_template('cart.html', items=items, total=total)

@app.route('/cart/add', methods=['POST'])
def add_to_cart():
    pid = str(request.form.get('product_id'))
    qty = float(request.form.get('qty', 1))
    cart_data = session.get('cart', {})
    cart_data[pid] = float(cart_data.get(pid, 0)) + qty
    session['cart'] = cart_data
    return redirect(url_for('cart'))

@app.route('/checkout', methods=['GET', 'POST'])
def checkout():
    # 1. Protection: Ensure user is logged in
    if 'user' not in session: 
        return redirect(url_for('login'))
    
    user_email = session['user']
    users = load_json(DATA_FILE, {})

    # 2. Safety: Ensure the user exists in our data dictionary
    if user_email not in users:
        users[user_email] = {'password': '', 'address': {}}

    # 3. Data Prep: Calculate current cart totals and items
    cart_data = session.get('cart', {})
    all_p = {str(p['id']): p for p in get_all_products()}
    items_to_save, total_val = [], 0
    
    for pid, qty in cart_data.items():
        if pid in all_p:
            p = all_p[pid]
            sub = p['price'] * float(qty)
            items_to_save.append({'name': p['name'], 'qty': float(qty), 'subtotal': sub})
            total_val += sub

    # --- HANDLE FORM SUBMISSION (Confirm Order) ---
    if request.method == 'POST':
        addr = {
            'name': request.form.get('name'),
            'phone': request.form.get('phone'),
            'address': request.form.get('address'),
            'pincode': request.form.get('pincode'),
            'taluk': request.form.get('taluk')
        }
        
        # Save address to user profile for next time
        users[user_email]['address'] = addr
        save_json(DATA_FILE, users)

        # Generate unique Order ID and save to orders.json
        order_id = str(uuid.uuid4())[:8]
        order_item = {
            'order_id': order_id,
            'user_email': user_email,
            'date': datetime.now().strftime("%Y-%m-%d %H:%M"),
            'items': items_to_save,
            'total': total_val,
            'address': addr,
            'payment': request.form.get('payment', 'Cash on Delivery')
        }
        
        orders = load_json(ORDERS_FILE, [])
        orders.append(order_item)
        save_json(ORDERS_FILE, orders)

        # Clear the cart and go to confirmation
        session.pop('cart', None)
        
        # IMPORTANT: Passing 'addr' as 'order' fixes your dictionary display issue
        return render_template('order_confirmation.html', 
                               order=addr, 
                               payment_method=order_item['payment'], 
                               total=total_val)

    # --- HANDLE PAGE LOAD (Show Checkout Form) ---
    # GET request: Load the checkout page and pre-fill address if we have it
    saved_addr = users.get(user_email, {}).get('address', {})
    return render_template('checkout.html', 
                           address_data=saved_addr, 
                           items=items_to_save, 
                           total=total_val)
@app.route('/history')
def history():
    if 'user' not in session: return redirect(url_for('login'))
    all_orders = load_json(ORDERS_FILE, [])
    user_orders = [o for o in all_orders if o['user_email'] == session['user']]
    user_orders.reverse()
    return render_template('history.html', orders=user_orders)

# --- ADMIN ROUTES ---
@app.route('/admin/dashboard')
def admin_dashboard():
    if not session.get('is_admin'): return redirect(url_for('admin_login'))
    return render_template('admin_dashboard.html', products=get_all_products())

@app.route('/admin/add', methods=['GET', 'POST'])
def add_product():
    if not session.get('is_admin'): 
        return redirect(url_for('admin_login'))

    if request.method == 'POST':
        products = get_all_products()
        new_product = {
            "id": max([p['id'] for p in products]) + 1 if products else 1,
            "name": request.form.get('name'),
            "price": float(request.form.get('price')),
            "mrp": float(request.form.get('mrp') or request.form.get('price')),
            "image": request.form.get('image')
        }
        products.append(new_product)
        save_json(PRODUCTS_FILE, products)
        return redirect(url_for('admin_dashboard'))

    return render_template('add_product.html')

@app.route('/admin/edit/<int:pid>', methods=['GET', 'POST'])
def edit_product(pid):
    if not session.get('is_admin'): return redirect(url_for('admin_login'))
    products = get_all_products()
    product = next((p for p in products if p['id'] == pid), None)
    
    if request.method == 'POST' and product:
        product.update({
            "name": request.form.get('name'),
            "price": float(request.form.get('price')),
            "mrp": float(request.form.get('mrp') or request.form.get('price')),
            "image": request.form.get('image')
        })
        save_json(PRODUCTS_FILE, products)
        return redirect(url_for('admin_dashboard'))
    return render_template('edit_product.html', product=product)

@app.route('/admin/login', methods=['GET', 'POST'])
def admin_login():
    if request.method == 'POST':
        if request.form.get('username') == ADMIN_USERNAME and check_password_hash(ADMIN_PASSWORD_HASH, request.form.get('password')):
            session['is_admin'] = True
            return redirect(url_for('admin_dashboard'))
    return render_template('admin_login.html')

# --- AUTH ROUTES ---
@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        users = load_json(DATA_FILE, {})
        email, pwd = request.form.get('email'), request.form.get('password')
        if email in users and check_password_hash(users[email]['password'], pwd):
            session['user'] = email
            return redirect(url_for('home'))
    return render_template('login.html')

@app.route('/signup', methods=['GET', 'POST'])
def signup():
    if request.method == 'POST':
        users = load_json(DATA_FILE, {})
        email, pwd = request.form.get('email'), request.form.get('password')
        users[email] = {'password': generate_password_hash(pwd), 'address': {}}
        save_json(DATA_FILE, users)
        session['user'] = email
        return redirect(url_for('home'))
    return render_template('signup.html')

@app.route('/logout')
def logout():
    session.clear()
    return redirect(url_for('home'))

if __name__ == '__main__':
    app.run(debug=True)
